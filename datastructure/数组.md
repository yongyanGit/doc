### 数组

数组是一种线性表数据结构，它用一组连续的内存空间，来存储一组具有相同类型的数据。

* 线性表就是数据排成一条线一样的结构。每个线性表上数据最多只有前后两个方向。除了数组，链表、队列、栈等都是线性表结构。

![linerList](../images/datastructure/linerList.jpg)

* 连续的内存空间和相同类型的数据。

连续的内存空间，使得在随机访问数组元素时效率很高。如下，我们拿一个长度为10的int类型的数组int[]a = new int[10]来举例。计算机为数组a[10]分配来一块连续内存空间1000～1039,其中内存块的首地址为base_address=1000。

![array](../images/datastructure/array.jpg)

我们知道计算机会给每个内存单元分配一个地址，计算机通过地址来访问内存中的数据。当计算机需要随机访问数组中的某个元素时，它会通过下面的寻址公式计算出该元素存储的内存地址：

```
a[i]_address = base_address+i*data_type_size
```

#### 低效的插入和删除

数组为了保证内存数据的连续性，会导致插入、删除这两个操作比较低效。

我们先来看**插入操作**

如果我们需要将一个数据插入到数组中的第k个位置，为了把第k个位置腾出来，给新来的数据，我们需要将第k~n这部分的元素都顺序地往后挪一位。

如果在数组的末尾插入元素，那就不需要移动数据了，这时间复杂度为O(1)。

如果在数组的开头插入元素，那所有的数据都需要依次往后移一位，所以最坏时间复杂度是O(n)，因为我们在每个位置插入元素的概率是一样的，所以平均时间复杂度是(1+2...+n)/n=O(n)。

如果数组中的元素是有序的，我们在某个位置插入一个新的元素时，就必须按照刚才的方法搬移k之后的数据，如果数组中存储的数据并没有规律，为了避免大规模的数据搬移，我们还有一个简单的办法就是，直接将第k位的数据搬移到数组元素的最后，把新的元素直接放入第k个位置。

我们再来看**删除操作**

跟插入数据类型，如果我们要删除第k个位置的数据，为了内存的连续性，也需要搬移数据，不然中间就会出现空洞，内存就不会连续了。

和插入类似，如果删除数组末尾的数据，则最好情况复杂度为O(1)，如果删除开头的数据，则最坏情况复杂度为O(n)，平均复杂度也为O(n)。

实际上，再某些情况下，我们并不一定非得追求数组中数据的连续性，如果我们将多次删除操作集中在一起，删除的效率会提升很多。

如下：数组a[10]中存储了8个元素：a,b,c,d,e,f,g,h，现在我们依次删除a,b,c三个元素，

![arrDelete](../images/datastructure/arrDelete.jpg)

为了避免d,e,f,g,h这几个数据会搬移三次，我们可以先记录下已经删除的数据。每次的删除的操作并不是真正的搬移数据，只是记录数据已经被删除，当数组没有更多空间存储时，我们再粗发执行一次真正的删除操作。

