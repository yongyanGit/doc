### MYSQL表

#### InnoDB逻辑存储结构

mysql所有的数据都存放在一个空间中，我们称之为表空间，表空间由段(segment)、区(extent)、页(page)组成，如图所示：

![mysql_table](../images/mysql_table.png)

表空间存放的只是数据、索引和插入缓冲，其它如撤销信息，系统事物信息、二次写缓冲等还是放在共享表空间中。如果我们启用参数```innodb_file_per_table```,则每张表内的数据可以单独放在一个表空间内。

表空间中常见的段有数据段、索引段、回滚段等。在InnoDB存储引擎中，数据段就是B+树的页节点，索引段就是B+树的非索引节点。

区由64个连续的页组成，每个页的大小为16K，对于大的数据段，最多可以申请4个区。

页是InnoDB磁盘管理的最小单位，常见的页类型有：

* 数据页(B-tree NODE)
* Undo页(Undo log Page)
* 系统页(System Page)
* 事务数据页
* 插入缓冲位图页
* 插入缓冲空闲列表页
* 未压缩的二进制大对象页
* 压缩的二进制大对象页

行，InnoDB是面向行的，也就是数据按照行进行存放，最多允许存放16kb/2 ~ 200行记录，即7992行记录。

#### InnoDB物理存储结构

InnoDB由共享表空间，日志文件组（Redo文件组）、表结构定义文件组成。如果讲```innodb_file_per_table```设置为on，则每个表将独立产生一个表空间。以ibd结尾，数据、索引、表的内部数据字典信息都在这个单独的表空间文件中。表结构定义文件以frm结尾。

